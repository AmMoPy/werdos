import e from"@emailjs/browser";export default async function s(s,t){if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","POST, OPTIONS"),t.setHeader("Access-Control-Allow-Headers","Content-Type"),"OPTIONS"===s.method)return t.status(200).end();if("POST"!==s.method)return t.status(405).json({success:!1,error:"Method not allowed"});let{email:r,subject:o,message:n}=s.body;if(!r||!o||!n||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||o.length>100||n.length>1e3)return t.status(400).json({success:!1,error:"Invalid input data"});try{return await e.send(process.env.SERVICE_ID,process.env.TEMPLATE_ID,{email:r,subject:o,message:n},process.env.API_KEY),t.status(200).json({success:!0})}catch(a){return console.error("EmailJS Error:",a.message||a),t.status(500).json({success:!1,error:"Failed to send email"})}};